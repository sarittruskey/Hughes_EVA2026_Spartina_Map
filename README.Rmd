---
title: "Hughes Lab EVA 2026 Map — README"
output: github_document
---

<!-- README.md is generated from README.Rmd. -->

# Hughes_EVA2026_Map

**Author:** Sarit Truskey  
**Last updated:** `r Sys.Date()`

Reproducible R Markdown workflow for generating the maps of *Spartina* nursery sources and local marsh sites included in the Hughes et al. EVA 2026 *Spartina* sourcing manuscript. The script produces a base map showing nursery and wild source locations (MA, NJ, MD nurseries, and MA local marsh area) and a set of fine-scale inset maps zoomed in to the three Massachusetts coastal marsh sites: Belle Isle, Rumney Marsh, and Rowley Great Marsh. 

Additionally, this Rmd was created as a teaching resources for the Hughes Lab (Marine Science Center, Northeastern University) and is **annotated in detail** throughout — if you are new to `ggplot2` mapping or `sf`, read the inline comments as you step through each chunk.

---

## Repository structure
This is the expected repository structure upon cloning and needed for runnning the main mapping script. 

```
Hughes_EVA2026_Map/
├── map_Hughes_EVA2026.Rmd  # Main mapping script (annotated for instruction)
├── map_Hughes_EVA2026.html # Knitted output for reference
├── README.Rmd # R markdown that renders README.md 
├── README.md # Markdown knitted from README.Rmd
├── data/ # Input data needed to run mapping script
│   ├── outline25k/ # MassGIS coastline shapefiles used for the more zoomed-in inset maps (see below for more details)
│   └── Table 1 for Belle Isle ms - Sheet1.csv # Local marsh subsite locations with lat/lon coordinates provided in manuscript table for all collections
└── map_figs/ # Output PDFs (generated by script)
```

---

## Input Data 

### 1. MassGIS coastline shapefiles

The inset maps use the **MassGIS State Outlines (1:25,000)** layer, a product created and maintained by the Commonwealth of Massachusetts Bureau of Geographic Information. I have included the shapefiles data here within this repository because the file size is relatively small and mistakes in downloading the shapefiles are often the most common error. However, just for the sake of unpacking and in case the user wants to download these data themselves or another version, below are instructions for downloading the spatial shapefiles.

1. Go to: <https://www.mass.gov/info-details/massgis-data-state-outlines>
2. Download the ZIP file for the 25K (1:25,000) state outline layer to data directory.
3. Unzip such that the **entire contents** (all files, not just `.shp`) of this file are now in:

```
data/outline25k/
```

The script reads two files from this directory:
- `OUTLINE25K_ARC.shp` — coastline arcs (outlines)
- `OUTLINE25K_POLY.shp` — land polygons (fill)

> ⚠️ You will see associated shapefile components with other file extensions (`.shp`, `.dbf`, `.prj`, `.shx`, etc.) in `data/outline25k/`, as well. You must keep all of these associated shapefile components together in the same folder for `sf::st_read()` to work correctly. Removing these is a common source of 'cannot read' errors for `sf::st_read()`.

### 2. CSV data files

The CSV file with local marsh collection locations (`Table 1 for Belle Isle ms - Sheet1.csv`) is included in `data/`. These data were compiled by Hughes lab members.

```{r}
head(read.csv(
  file.path("data","Table 1 for Belle Isle ms - Sheet1.csv"), 
  stringsAsFactors = FALSE))
```

---

## How to reproduce the maps

1. **Clone or download** this repository and unzip if needed.
2. **Open** `map_Hughes_EVA2026.Rmd` in RStudio.
3. **Set your working directory** to the root `Hughes_EVA2026_Map/` folder:
   - In RStudio: *Session → Set Working Directory → To Source File Location*
5. **Run the Rmd** chunk by chunk, or knit the whole document.
6. Running the `ggsave()` calls in the export chunks will write new map plots to `map_figs/`. 

---

## Outputs

All map figures are exported as PDFs to `map_figs/`

| File | Description |
|---|---|
| `base_map.pdf` | Base map with nursery (triangles) and wild source (square) locations |
| `base_map_nolegend.pdf` | Same, legend removed |
| `inset_map_full.pdf` | Full inset showing all MA subsites |
| `inset_map_row.pdf` | Rowley Great Marsh zoomed inset |
| `inset_map_row_sitenums.pdf` | Rowley inset with subsite numbers |
| `inset_map_rumbel.pdf` | Rumney + Belle Isle zoomed inset |
| `inset_map_rumbel_sitenums.pdf` | Rumney + Belle Isle inset with subsite numbers |

I then like to manually put together a final combined figure in Keynote or Inkscape because I find doing this a bit finicky in R itself (i.e., getting the placements just right, overlapping regions, etc.). You can also use Power Point or Adobe Illustrator or similar applications. There are definitely packages that will align insets onto maps for you that you can explore, but I personally prefer doing that styling on my own outside of R. I've included my Keynote file for the combined map figure as a download in this repository for reference, also in `map_figs/`

| File | Description |
|---|---|
| `Map_Fig1_sarit` | Keynote file with drafted versions of the final combined map figure |

---

## Final notes for Hughes Lab members
- For the inset maps, you can swap in a different regional shapefile (e.g., from [RIGIS](https://www.rigis.org/pages/map-collections) for Rhode Island) to adapt this workflow to other regions. 
- The inset map function `inset_map_func()` is reusable. Pass different `long_range` and `lat_range` values to zoom to any coastal area. 
- Final figures were assembled in **Keynote** after exporting individual PDFs — combining map components directly in R can be finicky with fine-scaled coastal data.

---
