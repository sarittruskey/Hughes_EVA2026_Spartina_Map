Hughes Lab EVA 2026 Spartina Map — README
================

<!-- README.md is generated from README.Rmd. -->

**Author:** Sarit Truskey  
**Last updated:** 2026-02-19

Reproducible R Markdown workflow for generating the maps included in
Hughes et al. EVA 2026 manuscript on *Spartina* sourcing for
restoration. The script produces a base map showing nursery and local
marsh source locations (Massachusetts, New Jersey, Maryland nurseries;
and the general Massachusetts local marsh area) and a set of fine-scale
inset maps zoomed in to the three Massachusetts coastal marsh sites:
Belle Isle, Rumney Marsh, and Rowley Great Marsh.

The Rmd is structured in two parts: A) the base map, with plotting code
written step-by-step directly in the script; and B) the inset maps,
generated using a reusable generalized plotting function defined in
`inset_map_gen_func.R` and sourced into the main script.

This Rmd was created as a teaching resource for the Hughes Lab (Marine
Science Center, Northeastern University) and is **annotated in detail**
throughout — if you are new to making maps in `ggplot2` or using `sf`
mapping tools, read the inline comments as you step through each chunk.

------------------------------------------------------------------------

## Repository structure

    Hughes_EVA2026_Spartina_Map/
    ├── inset_map_gen_func.R  # Script defining generalized mapping function for the zoomed-in inset maps (annotated for instruction)
    ├── map_Hughes_EVA2026.Rmd  # Main mapping script (annotated for instruction)
    ├── map_Hughes_EVA2026.html # Knitted output for reference
    ├── README.Rmd # R markdown that renders README.md 
    ├── README.md # Markdown knitted from README.Rmd
    ├── data/ # Input data needed to run mapping script
    │   ├── outline25k/ # MassGIS coastline shapefiles used for the more zoomed-in inset maps (see below for more details)
    │   └── Table 1 for Belle Isle ms - Sheet1.csv # Local marsh subsite locations with lat/lon coordinates provided in manuscript table for all collections
    └── map_figs/ # Output PDFs (included in repo for reference and will also be regenerated by running mapping script)

------------------------------------------------------------------------

## Input Data

### 1. MassGIS coastline shapefiles

The inset maps use the **MassGIS State Outlines (1:25,000)** layer, a
product created and maintained by the Commonwealth of Massachusetts
Bureau of Geographic Information. I have included the shapefiles data
here within this repository because the file size is relatively small
and mistakes in downloading the shapefiles are often the most common
error. However, just for the sake of unpacking and in case the user
wants to download these data themselves or another version, below are
instructions for downloading the spatial shapefiles.

1.  Go to:
    <https://www.mass.gov/info-details/massgis-data-state-outlines>
2.  Download the ZIP file for the 25K (1:25,000) state outline layer to
    data directory.
3.  Unzip such that the **entire contents** (all files, not just `.shp`)
    of this file are now in:

<!-- -->

    data/outline25k/

The script reads two files from this directory: - `OUTLINE25K_ARC.shp` —
coastline arcs (outlines) - `OUTLINE25K_POLY.shp` — land polygons (fill)

> ⚠️ You will see associated shapefile components with other file
> extensions (`.shp`, `.dbf`, `.prj`, `.shx`, etc.) in
> `data/outline25k/`, as well. You must keep all of these associated
> shapefile components together in the same folder for `sf::st_read()`
> to work correctly. Removing these is a common source of ‘cannot read’
> errors for `sf::st_read()`.

### 2. CSV data files

The CSV file with local marsh collection locations
(`Table 1 for Belle Isle ms - Sheet1.csv`) is included in `data/`. These
data were compiled by Hughes lab members.

``` r
head(read.csv(
  file.path("data","Table 1 for Belle Isle ms - Sheet1.csv"), 
  stringsAsFactors = FALSE))
```

    ##           Species         Site      Subsite Latitude Longitude
    ## 1 S. alterniflora   Belle Isle       L-Berm   42.387    70.990
    ## 2 S. alterniflora   Belle Isle Rosie's Pond   42.387    70.998
    ## 3 S. alterniflora   Belle Isle          Key   42.391    70.986
    ## 4 S. alterniflora Rumney Marsh          Far   42.437    70.996
    ## 5 S. alterniflora Rumney Marsh     Hamilton   42.443    70.990
    ## 6 S. alterniflora Rumney Marsh      Terrace   42.440    71.011
    ##   Date.of.seed.collection Source.population.N Greenhouse.population.N
    ## 1            Sept 14 2022                  20                       0
    ## 2            Sept 14 2022                  20                      20
    ## 3            Sept 14 2022                  20                       0
    ## 4            Sept 15 2022                  20                      20
    ## 5            Sept 15 2022                  20                      20
    ## 6            Sept 15 2022                  20                      20

------------------------------------------------------------------------

## How to reproduce the maps

1.  **Clone or download** this repository and unzip if needed.
2.  **Open** `map_Hughes_EVA2026.Rmd` in RStudio. This main script
    sources `inset_map_gen_func.R` automatically — the file that
    contains the generalized inset map function and is annotated
    separately for reuse with other regions.
3.  **Set your working directory** to the root `Hughes_EVA2026_Map/`
    folder:
    - In RStudio: *Session → Set Working Directory → To Source File
      Location*
4.  **Run the Rmd** chunk by chunk, or knit the whole document.
5.  Running the `ggsave()` calls in the export chunks will write new map
    plots to `map_figs/`.

------------------------------------------------------------------------

## Outputs

All map figures are exported as PDFs to `map_figs/`

| File                            | Description                                                          |
|---------------------------------|----------------------------------------------------------------------|
| `base_map.pdf`                  | Base map with nursery (triangles) and wild source (square) locations |
| `base_map_nolegend.pdf`         | Same, legend removed                                                 |
| `inset_map_full.pdf`            | Full inset showing all MA subsites                                   |
| `inset_map_row.pdf`             | Rowley Great Marsh zoomed inset                                      |
| `inset_map_row_sitenums.pdf`    | Rowley inset with subsite numbers                                    |
| `inset_map_rumbel.pdf`          | Rumney + Belle Isle zoomed inset                                     |
| `inset_map_rumbel_sitenums.pdf` | Rumney + Belle Isle inset with subsite numbers                       |

I then like to manually put together a final combined figure in Keynote
or Inkscape because I find doing this a bit finicky in R itself (i.e.,
getting the placements just right, overlapping regions, etc.). You can
also use Power Point or Adobe Illustrator or similar applications. There
are definitely packages that will align insets onto maps for you that
you can explore, but I personally prefer doing that styling on my own
outside of R. I’ve included my Keynote file for the combined map figure
as a download in this repository for reference, also in `map_figs/`

| File             | Description                                                         |
|------------------|---------------------------------------------------------------------|
| `Map_Fig1_sarit` | Keynote file with drafted versions of the final combined map figure |

------------------------------------------------------------------------

## Final notes for Hughes Lab members

- For the inset maps, you can swap in a different regional shapefile
  (e.g., from [RIGIS](https://www.rigis.org/pages/map-collections) for
  Rhode Island) to adapt this workflow to other regions.
- The inset map function `inset_map_gen_func()` is reusable and defined
  in the standalone R script `inset_map_gen_func.R`. Pass different
  `long_range` and `lat_range` values to zoom to any coastal area.
- Final figures were assembled in Keynote after exporting individual
  PDFs — combining map components directly in R can be finicky with
  fine-scaled coastal data.

------------------------------------------------------------------------
